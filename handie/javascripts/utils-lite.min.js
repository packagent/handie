/*!
 * Handie-jquery v1.0.2
 * 为前端开发提供统一的布局、组件和工具方法
 * https://github.com/ourai/handie
 *
 * Copyright 2017, Ourai Lin <ourairyu@gmail.com> (http://ourai.ws/)
 * Released under the MIT license.
 *
 * 00000000000000000000000000000000000000000000000000
 * 000000000000000000000GCft1tf1tLC000000000000000000
 * 00000000000000000LLf1i1i;t1t11i1itL000000000000000
 * 000000000000000Cf111t1;ttf1tt1if11;tfC000000000000
 * 0000000000000Ciiif11;11111iitf1f1ffftitL0000000000
 * 000000000000Ci1ti11i;1i11ti1i1;i1iit1iitG000000000
 * 000000000000t;iii1i1;11tt;1ii;1iiii11ti1G000000000
 * 0000000000Gf1i:;;ii;;;;1;i:1it;11i1tti:f8000000000
 * 00000000008ti;:;ii1tfti;;;1;ii1ii:11iiCG0000000000
 * 00000000000Git;f1f1fif1;i1t:;i;1:i;:;;800000000000
 * 00000000000C:1f;t;tt11;:tfC1:tt1;i::;:G00000000000
 * 000000000008i;i1fti;:ittCfftf:i1;ti;;;180000000000
 * 0000000000008fft1ff1tittttLGL.Li1;;1;ii80000000000
 * 000000000000CfLG800Gft1tffLLLLftt1::i;;C0000000000
 * 000000000000Li00GCCGGGf1LLfCCfi1tt1;11;G0000000000
 * 0000000000000;G80080008t1CfLtt;iff1;1if00000000000
 * 0000000000008i1LLCftG08011ttt1ttfff:ii;00000000000
 * G000000000000CL11ttCtfftfi1i;ifi1;1iL;C00000000000
 * 00G0G000000000000GLtfCG8i;:;1i;1if1fLfC00000000000
 * GGGGGGGG0000000000000G;tt:ii;1ftCLffLt1G0000000000
 * GGGGGGGGGG00000000000i;;i;ittLftLtf1t;;;L000000000
 * GGGGGGGGGGGGGGGGGG00:i;;i11ifLftft;ii1tLif000000G0
 * GGGGGGGGGGGGGGGGGGG0Lt;t;f1tfi;;;:itGCCitt:1C00GGG
 * GGGGGGGGGGGGGGGGGGGGG0i11:1:i:;1tCCCCGiGiCi::f0GGG
 * GGGGGGGGGGGGGGGGGGGGGf;,i1;:tLCffCLCf,tCCi1fi,fGGG
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function i(t){return Object.prototype.toString.call(t)}function c(t,e){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return void 0===t?"undefined":e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":e(t)};function f(t){return"[object Boolean]"===i(t)}function p(t){return"[object String]"===i(t)}function d(t){return"[object Function]"===i(t)}function v(t){return"[object Array]"===i(t)}function h(t){return"object"===(void 0===t?"undefined":n(t))}function o(t){return t&&h(t)&&"setInterval"in t}function r(t){var e,n=!1;if(h(t)&&!o(t)){var r=t.length;(1===t.nodeType&&r||!v(t)&&!d(t)&&(0===r||"[object Number]"===i(e=r)&&!isNaN(e)&&0<r&&r-1 in t))&&(n=!0)}return n}function g(t){if(!t||!h(t)||t.nodeType||o(t))return!1;try{if(t.constructor&&!c("constructor",t)&&!c("isPrototypeOf",t.constructor.prototype))return!1}catch(t){return!1}var e=void 0;for(e in t);return void 0===e||c(e,t)}function u(t){return p(t)||v(t)||r(t)}function m(t,e){if(u(t))for(var n=0,r=void 0;n<t.length&&(r=p(t)?t.charAt(n):t[n],!1!==e.apply(r,[r,n++,t])););else if("[object Object]"===i(t)||d(t)){var o=void 0,a=void 0;for(o in t)if(a=t[o],!1===e.apply(a,[a,o,t]))break}}function b(){var t=arguments,e=t.length,n=t[0]||{},r=1,o=!1,a=void 0,i=void 0,u=void 0,l=void 0,s=void 0,c=void 0;for(f(n)&&(o=n,n=t[1]||{},r=2),h(n)||d(n)||(n={}),1===e&&(n=this,r--);r<e;){if(null!=(s=t[r]))for(l in s)i=s[l],c=n[l],i!==n&&(o&&i&&(g(i)||(u=v(i)))?(u?(u=!1,a=c&&v(c)?c:[]):a=c&&g(c)?c:{},n[l]=b(o,a,i)):void 0!==i&&(n[l]=i));r++}return n}function a(t){return u(t)?[].slice.call(t,0):[]}function l(t,e){if(d(e.includes))return e.includes(t);if(d(e.indexOf))return-1<e.indexOf(t);try{return-1<jQuery.inArray(t,a(e))}catch(t){return!1}}function y(t,e){var n=void 0;if(u(t))if(d([].map))n=[].map.call(t,e);else try{n=jQuery.map(a(t),e)}catch(t){n=[]}return n||[]}function s(t){if(d(Object.keys))return Object.keys(t);var e=[];return g(t)&&m(t,function(t){return e.push(t)}),e}function j(t){return v(t)?[].concat(t):g(t)?b(!0,{},t):t}var x={theme:{color:"#ff8903"},behavior:"native",flexible:!1},w={},C={};function O(t){return p(t)&&new RegExp("^[0-9a-z_]+(.[0-9a-z_]+)*$","i").test(t)?t.split("."):[]}function S(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=O(e);if(!(arguments.length<3||0===o.length)){var a=o.pop(),i=t;return m(o,function(t){c(t,i)||(i[t]={}),i=i[t]}),!0===r&&g(i[a])&&g(n)?b(!0,i[a],n):i[a]=n,n}}function I(t,e){var n=O(e),r=n.length;if(0!==r){for(var o=0,a=j(t),i=void 0,u=void 0;o<r&&(i=a[u=n[o]],c(u,a));o++)a=i;return i}}function k(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return S.apply(void 0,[x].concat(e,[!0]))}function A(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[x].concat(e))}function L(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[w].concat(e))}function R(t,e){return L("bridge."+t+"."+e)}function T(t,e){var n,r=function(e,t){if(p(e)){var n=void 0;if(t){var r=L("env");m(s(L("bridge")),function(t){if("fallback"!==t&&!0===r[t])return n=R(t,e),!1})}return d(n)||(n=R("fallback",e)),n}}(t,f(n=e)?n:g(n)&&f(n.native)?n.native:"native"===A("behavior"));if(!d(r))return!1;for(var o=arguments.length,a=Array(2<o?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];return r.apply(null,[].concat(e,a))}k("http",{baseURL:"",serverErrorText:"服务器开小差啦～",jsonify:function(t){return t},isRestful:function(t){return!(void 0!==t&&c("success",t)&&c("message",t))},errorHandler:function(t){var e=t.status;if(500<=e)T("notice.alert",A("http.serverErrorText"));else if(400<=e){var n=t.responseText,r=void 0;if(c("responseJSON",t))r=t.responseJSON;else try{r=JSON.parse(n)}catch(t){r=null}g(r)&&c("message",r)&&(n=r.message),T("notice.alert",n)}},responseHandler:function(t,e){var n=d(e);A("http.isRestful")(t)?p(t)&&""!==t?T("notice.alert",t):n&&e.call(null,t):t.success?n&&e.call(null,t.data):T("notice.alert",t.message)},completeHandler:function(){}});var z=void 0;function E(){return d(jQuery)&&d(jQuery.ready)&&g(jQuery.support)&&g(jQuery.fn)&&jQuery.support.ajax&&d(jQuery.ajax)?"jquery":d(axios)&&d(axios.get)&&d(axios.put)&&d(axios.post)&&d(axios.delete)&&d(axios.options)&&d(axios.head)&&d(axios.patch)&&d(axios.request)?"axios":null}function N(t){var e=A("http"),n=e.jsonify(t.params),r=t.url,o=t.method,a=t.callback,i={url:r,method:o,type:o,global:!1};!0===t.isJson?(i.data=JSON.stringify(n),i.contentType="application/json; charset=UTF-8"):l(o,["get","delete"])?g(n)&&s(n).length&&(i.url+="?"+y(s(n),function(t){return t+"="+encodeURIComponent(n[t])}).join("&")):i.data=n;var u=window.jQuery.ajax(i);return!1!==t.global&&u.always(function(){return e.completeHandler()}).done(function(e){!function(t,e){var n=A("http.responseHandler");if(d(n))n(t,e)}(e,function(t){d(a)&&a.call(null,t,e)})}).fail(function(t){return e.errorHandler(t)}),u}function U(t){d(z)||(z=E());var e,n=b({url:"",method:"get",params:null,callback:null,isJson:!1},t);return/^http(s)?\:\/\//.test(n.url)||(n.url=A("http.baseURL")+n.url),"jquery"===z?N(n):"axios"===z?(e=n,window.axios(e)):null}function t(i){return function(t,e,n,r){var o=void 0;if(g(t)){var a=t;t=a.url,e=a.data,n=a.callback,r=a.isJson,o=a.global}else d(e)?(r=n,n=e,e={}):g(n)?(r=n.isJson,o=(n=n.callback).global):g(r)&&(o=(r=r.isJson).global);return U({url:t,method:i,params:e,callback:n,isJson:r,global:o})}}var J=t("get"),H=t("post"),Q=t("put"),F=t("delete"),_=Object.freeze({get:J,post:H,put:Q,delete:F});function q(t,e){var n,r={};if(m(v(t)?t:p(n=t)&&0<n.split("&").length&&0<n.split("&")[0].split("=").length?y(t.split("&"),function(t){var e=t.split("=");return{name:e[0],value:decodeURIComponent(e[1])}}):$(t).serializeArray(),function(t){r[t.name]=c(t.name,r)?[].concat(r[t.name],t.value):t.value}),d(e)){var o=e(r);g(o)&&(r=o)}return r}function D(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:A("http.waitingText"),n=t.closest(".modal");n.length&&(n.addClass("is-waiting"),$(".js-waitForResult",n).length?$(".js-waitForResult",n).show():$(".modal-content",n).append('<div class="Layer Layer--loading js-waitForResult"><p>'+e+"</p></div>"),$("button",$(".modal-header, .modal-footer",n)).prop("disabled",!0))}function P(o){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){if(u(t))return t[t.length-1]}(e);return g(r)&&r.$waiting&&D(r.$waiting,r.waitingText),_[o].apply(_,e)}}k("form",{filter:function(t,e,n){return!0},serializer:function(t){return t}}),k("http",{RESTful:!0,waitingText:"数据保存中，请耐心等待...",jsonify:function(t){return g(t)||v(t)?t:q(t)},completeHandler:function(){$(".modal:visible .js-waitForResult:visible").each(function(){var t=$(this),e=t.closest(".modal");t.hide(),e.removeClass("is-waiting"),$("button",$(".modal-header, .modal-footer",e)).prop("disabled",!1)})}});var W=P("get"),B=P("post"),M=P("put"),G=P("delete"),K=Object.freeze({get:W,post:B,put:M,delete:G,waiting:D,result:function(){return A("http.responseHandler").apply(void 0,arguments)}});var V=Object.freeze({init:function(r){if(p(r)&&(r={url:r}),c("WebSocket",window)&&g(r)&&c("url",r)){var t,e,n,o,a=new WebSocket((t=r.url,e=0===t.indexOf("//"),"localhost"===location.hostname?t=e?"ws:"+t:t.replace(/^ws(s)?\:\/\//,"ws://"):e&&(t="wss:"+t),t));return!1!==r.closeBeforeUnload&&window.addEventListener("beforeunload",function(){a.close()}),n=r.interval,o=n&&n.toString(),!v(n)&&0<=o-parseFloat(o)+1&&0<1*r.interval&&a.addEventListener("open",function(){!function t(e,n){setTimeout(function(){e.send("使 WebSocket 连接保持活跃"),t(e,n)},n)}(a,r.interval)}),m(["open","close","message","error"],function(t){var e,n=r["on"+(e=t,""+e.charAt(0).toUpperCase()+e.slice(1))];d(n)&&a.addEventListener(t,n)}),a}}});function X(t,e){var n,r,o,a;return t=t.toString(10),e=e.toString(10),n=t.split("."),r=e.split("."),o=2===n.length?n[1].length:0,a=2===r.length?r[1].length:0,Math.max(o,a)}function Y(t,e){var n,r=void 0;if(0===e)return t;n=(r=(t=t.toString(10)).split("."))[1]?r[1]:"",r=r[0];for(var o=0;o<e;o++)r+=n[o]?n[o]:"0";return 1*r}function Z(t,e){if(0===e)return t;var n,r=void 0;2===(r=(t=t.toString()).split(".")).length&&(e+=r[1].length,t=t.replace(".","")),r=t.split(""),n=t.length;for(var o=0;o<e-n;o++)r.unshift("0");return r.splice(r.length-e,0,"."),1*r.join("")}var tt=Object.freeze({plus:function(t,e){var n=X(t,e);return Z(Y(t,n)+Y(e,n),n)},minus:function(t,e){var n=X(t,e);return Z(Y(t,n)-Y(e,n),n)},multiply:function(t,e){var n=X(t,e);return Z(Y(t,n)*Y(e,n),2*n)},divided:function(t,e){var n=X(t,e);return Y(t,n)/Y(e,n)}});var et=Object.freeze({changed:function(t,n,r){var o={};return g(t)&&(g(n)?(v(r)||(r=[]),m(t,function(t,e){(0<r.length&&l(t,r)||e!==n[t])&&(o[t]=e)})):o=t),o}}),nt="handie.imageItemMax";function rt(t,e){p(e)&&(/^((http(s)?\:)?\/\/|\/[^\/]+).+/i.test(e)||-1!==e.indexOf("URL_PLACEHOLDER"))||(e=window.location.href);var n,r,o=(n=e,r=document.createElement("a"),r.setAttribute("href",n),r)[t];return l(t,["hash","search"])?o.slice(1):o}var ot={edit:{text:"编辑",icon:"edit"},delete:{text:"删除",action:"delete",icon:"trash"},disable:{text:"禁用",icon:"pause"},enable:{text:"启用",icon:"play"}};function at(){return b(!0,{},ot,A("generator.actions"))}function it(t){return p(t)&&c(t,at())&&(t={action:t}),t}function ut(e){var t=at(),n=!0===e.isDelete?"delete":e.action;if(c(n,t)){var r=t[n];m(s(r),function(t){c(t,e)||(e[t]=r[t])})}return e}function lt(t){var e=void 0;return p(t)?e=t:g(t)&&(e=c("html",t=ut(t))?t.html:'<a class="js-'+t.action+'" href="'+(p(t.url)?t.url:"javascript:void(0);")+'"'+(!0===t.isExternal?'target="_blank"':"")+">"+t.text+"</a>"),"<li>"+(e||"")+"</li>"}function st(t,e){if(!g(t=it(t)))return"";b(t,e);var n=[],r=t.size||"xs",o=c("actions",t)&&v(t.actions),a=j(t.classes);p(a)?a=a.split(" "):v(a)||(a=[]),a=["Operation","btn","btn-"+(!0===t.isPrimary?"primary":!0===t.isDelete?"danger":"default"),"btn-"+r].concat(a);var i,u,l=j(t.attributes);if(g(l)){var s=[];m(l,function(t,e){s.push(e+"="+t)}),l=s}else p(l)?l=l.split(" "):v(l)||(l=[]);return n.push(function(t){var e=[].concat(t.btnCls),n=[],r=void 0;p(t.action)&&e.push("js-"+t.action),p(t.url)?(r="a",n.push('href="'+t.url+'"'),!0===t.isExternal&&n.push('target="_blank"')):(r="button",n.push('type="button"'),!0===t.disabled&&n.push("disabled")),t.hasChildren&&!0!==t.isSplit&&(e.push("dropdown-toggle"),n.push('data-toggle="dropdown"')),n.push('class="'+e.join(" ")+'"','title="'+(t.tooltip||t.text)+'"');var o=["<"+r+" "+n.concat(t.btnAttrs).join(" ")+">"];if(p(t.icon)){var a=["Operation-icon","fa","fa-"+t.icon];!1!==t.fixedWidth&&a.push("fa-fw"),o.push('<i class="'+a.join(" ")+'"></i><span class="'+(!0===t.isCoexisted?"Operation-label":"sr-only")+'">'+t.text+"</span>")}else o.push(t.text);return t.hasChildren&&!0!==t.isSplit&&o.push('<span class="caret"></span>'),o.push("</"+r+">"),o.join("")}(b({},ut(t),{btnCls:a.concat(p(t.buttonClass)?t.buttonClass:[]),btnAttrs:l,hasChildren:o}))),o&&(n.unshift('<div class="btn-group btn-group-'+r+'">'),n.push((i=b({},t,{btnCls:a}),u=[],!0===i.isSplit&&u.push('<button type="button" class="'+i.btnCls.concat("dropdown-toggle").join(" ")+'" data-toggle="dropdown"',!0===i.disabled?" disabled":"",'><span class="caret"></span></button>'),u.push('<ul class="Operation-menu dropdown-menu',"right"===i.align?" dropdown-menu-right":"",'">'),u.push(y(i.actions,function(t,e){var n=v(t),r=n?y(t,function(t){return lt(t)}).join(""):lt(t);return 0<e&&n&&(r='<li class="divider"></li>'+r),r}).join("")),u.push("</ul>"),u.join("")),"</div>")),n.join("")}function ct(t,e){return $(".ImageItem:not(.ImageItem--add)",t.closest(".ImageList").parent()).length>=e}function ft(t,e,n){var r=[];e=e||"";var o=void 0;return t&&p(t)&&(o=function(t){var e=rt("pathname",t).split("/"),n=e.length,r=e[n-1];""===r&&(r=e[n-2]);var o=r.match(/\.([^\.]+)$/);return o?o[1].toUpperCase():""}(t)),r.push('<figure class="ImageItem'),t&&o&&!l(o.toLowerCase(),A("uploader.extension.image").split(","))&&r.push(" is-nongraphic"),r.push('"><div><a href="'+(t||"javascript:void(0);")+'" target="_blank" data-file-ext="'+o+'"><img src="'+(t||"")+'" alt="'+e+'" title="'+e+'"></a></div>'),e&&r.push('<figcaption class="u-textTruncate" title="'+e+'">'+e+"</figcaption>"),!0===n&&r.push('<button type="button" class="ImageItem-button fa fa-close js-removeUploadedImage" title="删除"><span class="sr-only"></span></button>'),r.push("</figure>"),r.join("")}k("generator",{imageColumnCount:3,actions:{}});var pt=Object.freeze({action:function(t,e){if(g(t=it(t))&&(t=[t]),!v(t=t.concat(A("table.rowActions"))))return!1;var n=y(t,function(t){return st(t,{align:"right"})});return(1<t.length||!0===e)&&(n.unshift('<div class="OperationGroup">'),n.push("</div>")),n.join("")},option:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments[3],o=['class="is-dynamic"','value="'+t+'"'];return g(n)?m(n,function(t,e){return o.push("data-"+e+'="'+t+'"')}):r=n,!0===r&&o.push("selected"),"<option "+o.join(" ")+">"+e+"</option>"},image:ft,imageItem:function(t){var e=$(t.$btn),n=t.max;if(!(!e.is(".ImageItem")||n&&ct(e,n))){var r=Number(t.column);(isNaN(r)||r<=0)&&(r=A("generator.imageColumnCount"));var o="ImageList",a="ImageList-item",i=t.$btn.closest("."+a),u=$('<div class="'+a+" col-sm-"+12/r+' is-dynamic" />');u.html(ft(t.url,t.text,t.removable)),i.before(u),d(t.callback)&&t.callback.call(null,u,i);var l=i.siblings("."+a).length;if(l===r&&($("."+o+":last",t.$el).after('<div class="'+o+' row" />'),$("."+o+":last",t.$el).append(i)),n){var s=i.closest("."+o),c="u-hidden";e.data(nt,n),$("."+o+"."+c+", ."+a+"."+c,s.parent()).removeClass(c),ct(s,n)&&(i.addClass(c),0===l&&s.addClass(c))}return u}}});function dt(e){return function(t){return rt(e,t)}}var vt=dt("search"),ht=dt("href"),gt=dt("protocol"),mt=dt("host"),bt=dt("hostname"),yt=dt("port"),jt=dt("pathname"),xt=dt("hash"),wt=dt("username"),Ct=dt("password"),Ot=dt("origin");var St=Object.freeze({href:ht,protocol:gt,host:mt,hostname:bt,port:yt,pathname:jt,hash:xt,username:wt,password:Ct,origin:Ot,query:function(t,e){var n=window.location.href;1===arguments.length&&p(t)&&-1===t.indexOf("http")&&(e=t,t=n),p(t)||(t=n);var r,o,a=(r=vt(t),o={},m(r.split("&"),function(t){t=t.split("="),o[t[0]]=decodeURIComponent(t[1])}),o);return null==e?a:a[e]},search:vt});var $t=Object.freeze({copy:function(t,e){var n,r,o=void 0;if(!p(t)){var a=(o=$(t)).get(0);if(null==a||1!==a.nodeType)return;t=l(a.tagName.toLowerCase(),["input","textarea"])?o.val():o.text()}return n=t,(r=document.createElement("input")).setAttribute("value",n),document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),o&&!0===e&&o.select(),t}});window.handie={setDefaults:function(t){g(t)&&m(t,function(t,e){return k("ajax"===(n=e)?"http":n,t);var n})},set:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return S.apply(void 0,[C].concat(e))},get:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[C].concat(e))},http:K,socket:V,generate:pt,text:$t,calc:tt,data:et,url:St,ajax:K,calculate:tt}});
//# sourceMappingURL=../maps/utils-lite.min.js.map

/*!
 * Handie-jquery v1.0.2
 * 为前端开发提供统一的布局、组件和工具方法
 * https://github.com/ourai/handie
 *
 * Copyright 2017, Ourai Lin <ourairyu@gmail.com> (http://ourai.ws/)
 * Released under the MIT license.
 *
 * 00000000000000000000000000000000000000000000000000
 * 000000000000000000000GCft1tf1tLC000000000000000000
 * 00000000000000000LLf1i1i;t1t11i1itL000000000000000
 * 000000000000000Cf111t1;ttf1tt1if11;tfC000000000000
 * 0000000000000Ciiif11;11111iitf1f1ffftitL0000000000
 * 000000000000Ci1ti11i;1i11ti1i1;i1iit1iitG000000000
 * 000000000000t;iii1i1;11tt;1ii;1iiii11ti1G000000000
 * 0000000000Gf1i:;;ii;;;;1;i:1it;11i1tti:f8000000000
 * 00000000008ti;:;ii1tfti;;;1;ii1ii:11iiCG0000000000
 * 00000000000Git;f1f1fif1;i1t:;i;1:i;:;;800000000000
 * 00000000000C:1f;t;tt11;:tfC1:tt1;i::;:G00000000000
 * 000000000008i;i1fti;:ittCfftf:i1;ti;;;180000000000
 * 0000000000008fft1ff1tittttLGL.Li1;;1;ii80000000000
 * 000000000000CfLG800Gft1tffLLLLftt1::i;;C0000000000
 * 000000000000Li00GCCGGGf1LLfCCfi1tt1;11;G0000000000
 * 0000000000000;G80080008t1CfLtt;iff1;1if00000000000
 * 0000000000008i1LLCftG08011ttt1ttfff:ii;00000000000
 * G000000000000CL11ttCtfftfi1i;ifi1;1iL;C00000000000
 * 00G0G000000000000GLtfCG8i;:;1i;1if1fLfC00000000000
 * GGGGGGGG0000000000000G;tt:ii;1ftCLffLt1G0000000000
 * GGGGGGGGGG00000000000i;;i;ittLftLtf1t;;;L000000000
 * GGGGGGGGGGGGGGGGGG00:i;;i11ifLftft;ii1tLif000000G0
 * GGGGGGGGGGGGGGGGGGG0Lt;t;f1tfi;;;:itGCCitt:1C00GGG
 * GGGGGGGGGGGGGGGGGGGGG0i11:1:i:;1tCCCCGiGiCi::f0GGG
 * GGGGGGGGGGGGGGGGGGGGGf;,i1;:tLCffCLCf,tCCi1fi,fGGG
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function r(t){return Object.prototype.toString.call(t)}function h(t,e){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function i(t){return""+t.charAt(0).toUpperCase()+t.slice(1)}function d(t){return t+"-"+(new Date).getTime().toString(32).toUpperCase()}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return void 0===t?"undefined":e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":e(t)};function u(t){return"[object Boolean]"===r(t)}function v(t){return"[object String]"===r(t)}function m(t){return"[object Function]"===r(t)}function f(t){return"[object Array]"===r(t)}function p(t){return"object"===(void 0===t?"undefined":n(t))}function c(t){var e=t&&t.toString();return!f(t)&&0<=e-parseFloat(e)+1}function o(t){return t&&p(t)&&"setInterval"in t}function a(t){var e,n=!1;if(p(t)&&!o(t)){var a=t.length;(1===t.nodeType&&a||!f(t)&&!m(t)&&(0===a||"[object Number]"===r(e=a)&&!isNaN(e)&&0<a&&a-1 in t))&&(n=!0)}return n}function b(t){if(!t||!p(t)||t.nodeType||o(t))return!1;try{if(t.constructor&&!h("constructor",t)&&!h("isPrototypeOf",t.constructor.prototype))return!1}catch(t){return!1}var e=void 0;for(e in t);return void 0===e||h(e,t)}function s(t){return v(t)||f(t)||a(t)}function g(t,e){if(s(t))for(var n=0,a=void 0;n<t.length&&(a=v(t)?t.charAt(n):t[n],!1!==e.apply(a,[a,n++,t])););else if("[object Object]"===r(t)||m(t)){var i=void 0,o=void 0;for(i in t)if(o=t[i],!1===e.apply(o,[o,i,t]))break}}function y(){var t=arguments,e=t.length,n=t[0]||{},a=1,i=!1,o=void 0,r=void 0,s=void 0,l=void 0,c=void 0,d=void 0;for(u(n)&&(i=n,n=t[1]||{},a=2),p(n)||m(n)||(n={}),1===e&&(n=this,a--);a<e;){if(null!=(c=t[a]))for(l in c)r=c[l],d=n[l],r!==n&&(i&&r&&(b(r)||(s=f(r)))?(s?(s=!1,o=d&&f(d)?d:[]):o=d&&b(d)?d:{},n[l]=y(i,o,r)):void 0!==r&&(n[l]=r));a++}return n}function l(t){return s(t)?[].slice.call(t,0):[]}function w(t,e){if(m(e.includes))return e.includes(t);if(m(e.indexOf))return-1<e.indexOf(t);try{return-1<jQuery.inArray(t,l(e))}catch(t){return!1}}function x(t,e){var n=void 0;if(s(t))if(m([].map))n=[].map.call(t,e);else try{n=jQuery.map(l(t),e)}catch(t){n=[]}return n||[]}function C(n,a){var i=[];return f(n)&&(m(n.filter)?i=n.filter(a):m(a)&&g(n,function(t,e){a.apply(e,[e,t,[].concat(n)])&&i.push(e)})),i||[]}function j(t){if(s(t))return t[t.length-1]}function _(t){if(m(Object.keys))return Object.keys(t);var e=[];return b(t)&&g(t,function(t){return e.push(t)}),e}function k(t){return f(t)?[].concat(t):b(t)?y(!0,{},t):t}var T={theme:{color:"#ff8903"},behavior:"native",flexible:!1},A={},L={};function O(t){return v(t)&&new RegExp("^[0-9a-z_]+(.[0-9a-z_]+)*$","i").test(t)?t.split("."):[]}function E(t,e,n){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=O(e);if(!(arguments.length<3||0===i.length)){var o=i.pop(),r=t;return g(i,function(t){h(t,r)||(r[t]={}),r=r[t]}),!0===a&&b(r[o])&&b(n)?y(!0,r[o],n):r[o]=n,n}}function I(t,e){var n=O(e),a=n.length;if(0!==a){for(var i=0,o=k(t),r=void 0,s=void 0;i<a&&(r=o[s=n[i]],h(s,o));i++)o=r;return r}}function S(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return E.apply(void 0,[T].concat(e,[!0]))}function z(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[T].concat(e))}function N(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[A].concat(e))}function F(t,e){return N("bridge."+t+"."+e)}function H(t,e){var n,a=function(e,t){if(v(e)){var n=void 0;if(t){var a=N("env");g(_(N("bridge")),function(t){if("fallback"!==t&&!0===a[t])return n=F(t,e),!1})}return m(n)||(n=F("fallback",e)),n}}(t,u(n=e)?n:b(n)&&u(n.native)?n.native:"native"===z("behavior"));if(!m(a))return!1;for(var i=arguments.length,o=Array(2<i?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];return a.apply(null,[].concat(e,o))}S("http",{baseURL:"",serverErrorText:"服务器开小差啦～",jsonify:function(t){return t},isRestful:function(t){return!(void 0!==t&&h("success",t)&&h("message",t))},errorHandler:function(t){var e=t.status;if(500<=e)H("notice.alert",z("http.serverErrorText"));else if(400<=e){var n=t.responseText,a=void 0;if(h("responseJSON",t))a=t.responseJSON;else try{a=JSON.parse(n)}catch(t){a=null}b(a)&&h("message",a)&&(n=a.message),H("notice.alert",n)}},responseHandler:function(t,e){var n=m(e);z("http.isRestful")(t)?v(t)&&""!==t?H("notice.alert",t):n&&e.call(null,t):t.success?n&&e.call(null,t.data):H("notice.alert",t.message)},completeHandler:function(){}});var U=void 0;function B(){return m(jQuery)&&m(jQuery.ready)&&b(jQuery.support)&&b(jQuery.fn)&&jQuery.support.ajax&&m(jQuery.ajax)?"jquery":m(axios)&&m(axios.get)&&m(axios.put)&&m(axios.post)&&m(axios.delete)&&m(axios.options)&&m(axios.head)&&m(axios.patch)&&m(axios.request)?"axios":null}function D(t){var e=z("http"),n=e.jsonify(t.params),a=t.url,i=t.method,o=t.callback,r={url:a,method:i,type:i,global:!1};!0===t.isJson?(r.data=JSON.stringify(n),r.contentType="application/json; charset=UTF-8"):w(i,["get","delete"])?b(n)&&_(n).length&&(r.url+="?"+x(_(n),function(t){return t+"="+encodeURIComponent(n[t])}).join("&")):r.data=n;var s=window.jQuery.ajax(r);return!1!==t.global&&s.always(function(){return e.completeHandler()}).done(function(e){!function(t,e){var n=z("http.responseHandler");if(m(n))n(t,e)}(e,function(t){m(o)&&o.call(null,t,e)})}).fail(function(t){return e.errorHandler(t)}),s}function M(t){m(U)||(U=B());var e,n=y({url:"",method:"get",params:null,callback:null,isJson:!1},t);return/^http(s)?\:\/\//.test(n.url)||(n.url=z("http.baseURL")+n.url),"jquery"===U?D(n):"axios"===U?(e=n,window.axios(e)):null}function t(r){return function(t,e,n,a){var i=void 0;if(b(t)){var o=t;t=o.url,e=o.data,n=o.callback,a=o.isJson,i=o.global}else m(e)?(a=n,n=e,e={}):b(n)?(a=n.isJson,i=(n=n.callback).global):b(a)&&(i=(a=a.isJson).global);return M({url:t,method:r,params:e,callback:n,isJson:a,global:i})}}var R=t("get"),P=t("post"),G=t("put"),q=t("delete"),J=Object.freeze({get:R,post:P,put:G,delete:q});function W(){return h("localStorage",window)}function Q(){return h("modal",$.fn)}function X(){return h("bootstrapTable",$.fn)}function V(){return h("datetimepicker",$.fn)}function Y(){return h("select2",$.fn)}function K(){return h("H5F",window)}function Z(){return h("moment",window)}function tt(t,e){t.tooltip(y(!0,{placement:"auto bottom",trigger:"hover",container:"body"},e))}function et(e,t,n){var a=void 0;return null==t||""===t?a=C($("option",e).toArray(),function(t){return!0===t.defaultSelected}):(v(t)&&t.split(",")&&(t=t.split(",")),a=f(t)?x(t,function(t){return $("option[value='"+t+"']",e)}):$("option[value='"+t+"']",e)),$(":selected",e).prop("selected",!1),g($(a).toArray(),function(t){$(t).prop("selected",!0)}),m(n)&&n.call(e.get(0)),e.trigger("change"),e}var nt=Object.freeze({change:et});function at(t,e){var n,a={};if(g(f(t)?t:v(n=t)&&0<n.split("&").length&&0<n.split("&")[0].split("=").length?x(t.split("&"),function(t){var e=t.split("=");return{name:e[0],value:decodeURIComponent(e[1])}}):$(t).serializeArray(),function(t){a[t.name]=h(t.name,a)?[].concat(a[t.name],t.value):t.value}),m(e)){var i=e(a);b(i)&&(a=i)}return a}function it(){var t=$(this);$(".form-group",t).removeClass("has-success has-error"),$(".help-block:not(.is-dynamic)",t).removeClass("u-hidden"),$(".help-block.is-dynamic, .Error, .ErrorGroup",t).addClass("u-hidden")}function ot(t){H5F.init(t,{immediate:!1}),$("[name]",t).on({"H5F:valid":function(t,e){var n=$(t.target).closest("div"),a=n.closest(".form-group"),i=void 0;0<a.length?(i='.help-block[data-name="'+e.name+'"]',$(".help-block:not(.is-dynamic)",a).addClass("u-hidden"),a.removeClass("has-error").addClass("has-success")):(i='.Error[data-name="'+e.name+'"]',a=$(".ErrorGroup",n)),$(i,n).addClass("u-hidden"),a.is(".ErrorGroup")&&0===$(".Error:not(.u-hidden)",a).length&&a.addClass("u-hidden")},"H5F:invalid":function(t,e){var n=$(t.target).closest("div"),a=n.closest(".form-group"),i=void 0,o=void 0,r=void 0;0<a.length?(o='.help-block[data-name="'+e.name+'"]',r='<p class="help-block is-dynamic" data-name="'+e.name+'" />',i=n,$(".help-block:not(.is-dynamic)",i).addClass("u-hidden"),a.removeClass("has-success").addClass("has-error")):(o='.Error[data-name="'+e.name+'"]',r='<p class="Error" data-name="'+e.name+'" />',0<(i=$(".ErrorGroup",n)).length?i.removeClass("u-hidden"):(n.append('<div class="ErrorGroup" />'),i=$(".ErrorGroup",n)));var s=$(o,i);0===s.length&&(i.append(r),s=$(o,i)),s.text(e.message).removeClass("u-hidden")}}),t.on("reset",it)}function rt(i,o){b(o)&&$("[name]",i).each(function(){var t=$(this),e=this.tagName.toLowerCase(),n=t.attr("name"),a=o[n];w(e,["input","textarea"])?w(t.attr("type"),["radio","checkbox"])?$('[name="'+n+'"][value="'+a+'"]',i).prop("checked",!0):t.val(a):"select"===e&&et(t,a)})}S("form",{filter:function(t,e,n){return!0},serializer:function(t){return t}});var st=Object.freeze({h5f:ot,fill:rt,reset:function(t,e){$("select",t).each(function(){et($(this))}),$('[type="hidden"]',t).val(""),m(e)&&e.call(t.get(0))},serialize:function(a,i){var t=a,e=void 0;return b(a)&&(a=t.$form,i=t.filter,e=t.serializer),m(i)||(i=z("form.filter")),m(e)||(e=z("form.serializer")),e(C((a=$(a)).serializeArray(),function(t,e,n){return i(t,$('[name="'+t.name+'"]',a),n)}))},jsonify:at});function lt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:z("http.waitingText"),n=t.closest(".modal");n.length&&(n.addClass("is-waiting"),$(".js-waitForResult",n).length?$(".js-waitForResult",n).show():$(".modal-content",n).append('<div class="Layer Layer--loading js-waitForResult"><p>'+e+"</p></div>"),$("button",$(".modal-header, .modal-footer",n)).prop("disabled",!0))}function ct(i){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=j(e);return b(a)&&a.$waiting&&lt(a.$waiting,a.waitingText),J[i].apply(J,e)}}S("http",{RESTful:!0,waitingText:"数据保存中，请耐心等待...",jsonify:function(t){return b(t)||f(t)?t:at(t)},completeHandler:function(){$(".modal:visible .js-waitForResult:visible").each(function(){var t=$(this),e=t.closest(".modal");t.hide(),e.removeClass("is-waiting"),$("button",$(".modal-header, .modal-footer",e)).prop("disabled",!1)})}});var dt=ct("get"),ut=ct("post"),ft=ct("put"),pt=ct("delete"),ht=Object.freeze({get:dt,post:ut,put:ft,delete:pt,waiting:lt,result:function(){return z("http.responseHandler").apply(void 0,arguments)}});var bt=Object.freeze({init:function(n){if(v(n)&&(n={url:n}),h("WebSocket",window)&&b(n)&&h("url",n)){var t,e,a=new WebSocket((t=n.url,e=0===t.indexOf("//"),"localhost"===location.hostname?t=e?"ws:"+t:t.replace(/^ws(s)?\:\/\//,"ws://"):e&&(t="wss:"+t),t));return!1!==n.closeBeforeUnload&&window.addEventListener("beforeunload",function(){a.close()}),c(n.interval)&&0<1*n.interval&&a.addEventListener("open",function(){!function t(e,n){setTimeout(function(){e.send("使 WebSocket 连接保持活跃"),t(e,n)},n)}(a,n.interval)}),g(["open","close","message","error"],function(t){var e=n["on"+i(t)];m(e)&&a.addEventListener(t,e)}),a}}});function vt(t,e){var n=void 0,a=void 0;if(v(e)?n=e:b(e)&&(n=e.type,a=e.formatter),"bootstrap"===n){var i=$(".js-alertSystemMessage");0===i.length&&(i=$('\n          <div class="modal fade js-alertSystemMessage">\n            <div class="modal-dialog">\n              <div class="modal-content">\n                <div class="modal-header">\n                  <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>\n                  <h4 class="modal-title">系统提示</h4>\n                </div>\n                <div class="modal-body"></div>\n                <div class="modal-footer">\n                  <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        '),$("body").append(i)),m(a)||(a=function(t){return'<p class="u-textBreak">'+t+"</p>"}),$(".modal-body",i).html(a.call(null,t)||t),i.modal("show")}else window.alert(t)}function mt(){return $(z("table.selector"))}function gt(t){return!0===t.__operationDefinedByColumns||t.operation&&!0===t.operation.sticky}function $t(t,e,n){var a=t.$tableContainer,i=t.$tableHeader,o=t.$tableBody,r=gt(t.options);!1!==e?(o.css("height",n),a.addClass("is-sticky"),i.show(),r&&o.css("position","relative").find(".Table-container--alternative").css("margin-right","-"+o.scrollLeft()+"px")):(o.css("height","auto"),a.removeClass("is-sticky"),$("> table",i.hide()).css("margin-left",0),r&&o.css("position","static").find(".Table-container--alternative").css("margin-right",0))}function yt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:mt(),e=arguments[1];u(t)&&(e=t,t=mt());var n=void 0;!0===e&&(n={pageNumber:1}),t.bootstrapTable("refresh",n)}var wt={selector:".js-showDataTable",showRowNumber:!1,classes:"table table-condensed table-hover",slim:!1,rowActions:[],keys:{sort:"sortBy",order:"orderBy"},toolbarActions:{basic:{fixedWidth:!1,isCoexisted:!0},create:{text:"新增",tooltip:"添加新的条目",icon:"plus"},batch:{text:"批量操作",tooltip:"对选中条目进行批量操作",action:"batchTable"},search:{label:!1,width:"auto",filter:{selector:".js-filterTableData",mode:"dropdown",button:{text:"筛选",tooltip:"查看更多筛选条件",action:"showMoreFilters",icon:"filter",fixedWidth:!0,isCoexisted:!1},dialog:{title:"筛选数据",size:"lg"}}}},operationColumn:{sticky:!1,field:"operation",text:"操作",events:{"click .js-edit":function(t,e,n,a){var i,o,r=$(this),s=(i=r.closest("table"),0===(o=$(i.data("bootstrap.table").options.__$dialog)).length&&i.is(z("table.selector"))&&(o=$(z("dialog.selector"))),o);r.is("a[href]")||1!==s.length||(rt($("form",s),n),s.modal("show")),t.stopPropagation()},"click .js-delete":function(t,e,n,a){var i=$(this),o=i.closest("table"),r=j(o.data("bootstrap.table").columns).__handieAjaxOpts||{};if(h("delete",r)&&(r=r.delete),h("url",r)){var s=function(){return yt(o)},l=!0===z("ajax.RESTful")?pt:ut,c=[n,a],d=r,u=d.url,f=d.params,p=d.extra;m(u)&&(u=u.apply(this,c)),m(f)&&(f=f.apply(this,c)),m(p)&&(p=p.apply(this,c)),v(u)&&confirm("确定要"+(i.attr("title")||i.attr("data-original-title")||"进行此操作")+"？")&&(f?l(u,f,s,p):l(u,s,p)),t.stopPropagation()}else t.stopPropagation()}}},responseHandler:function(t){var e,n,a,i=(n=[],a=0,f(e=t)?a=(n=e).length:b(e)&&(f(e.result)?(n=e.result,a=e.totalCount):f(e.data)?(n=e.data,a=e.totalCount):b(e.data)&&f(e.data.result)&&(n=e.data.result,a=e.data.totalCount)),{rows:n,total:a});return z("http.isRestful")(t)?v(t)&&vt(t):t.success||vt(t.message),"server"===this.sidePagination?i:i.rows}},xt={IMAGE_ITEM_MAX:"handie.imageItemMax"},Ct={edit:{text:"编辑",icon:"edit"},delete:{text:"删除",action:"delete",icon:"trash"},disable:{text:"禁用",icon:"pause"},enable:{text:"启用",icon:"play"}};function jt(){return y(!0,{},Ct,z("generator.actions"))}function _t(t){return v(t)&&h(t,jt())&&(t={action:t}),t}function kt(e){var t=jt(),n=!0===e.isDelete?"delete":e.action;if(h(n,t)){var a=t[n];g(_(a),function(t){h(t,e)||(e[t]=a[t])})}return e}function Tt(t){var e=void 0;return v(t)?e=t:b(t)&&(e=h("html",t=kt(t))?t.html:'<a class="js-'+t.action+'" href="'+(v(t.url)?t.url:"javascript:void(0);")+'"'+(!0===t.isExternal?'target="_blank"':"")+">"+t.text+"</a>"),"<li>"+(e||"")+"</li>"}function At(t,e){if(!b(t=_t(t)))return"";y(t,e);var n=[],a=t.size||"xs",i=h("actions",t)&&f(t.actions),o=k(t.classes);v(o)?o=o.split(" "):f(o)||(o=[]),o=["Operation","btn","btn-"+(!0===t.isPrimary?"primary":!0===t.isDelete?"danger":"default"),"btn-"+a].concat(o);var r,s,l=k(t.attributes);if(b(l)){var c=[];g(l,function(t,e){c.push(e+"="+t)}),l=c}else v(l)?l=l.split(" "):f(l)||(l=[]);return n.push(function(t){var e=[].concat(t.btnCls),n=[],a=void 0;v(t.action)&&e.push("js-"+t.action),v(t.url)?(a="a",n.push('href="'+t.url+'"'),!0===t.isExternal&&n.push('target="_blank"')):(a="button",n.push('type="button"'),!0===t.disabled&&n.push("disabled")),t.hasChildren&&!0!==t.isSplit&&(e.push("dropdown-toggle"),n.push('data-toggle="dropdown"')),n.push('class="'+e.join(" ")+'"','title="'+(t.tooltip||t.text)+'"');var i=["<"+a+" "+n.concat(t.btnAttrs).join(" ")+">"];if(v(t.icon)){var o=["Operation-icon","fa","fa-"+t.icon];!1!==t.fixedWidth&&o.push("fa-fw"),i.push('<i class="'+o.join(" ")+'"></i><span class="'+(!0===t.isCoexisted?"Operation-label":"sr-only")+'">'+t.text+"</span>")}else i.push(t.text);return t.hasChildren&&!0!==t.isSplit&&i.push('<span class="caret"></span>'),i.push("</"+a+">"),i.join("")}(y({},kt(t),{btnCls:o.concat(v(t.buttonClass)?t.buttonClass:[]),btnAttrs:l,hasChildren:i}))),i&&(n.unshift('<div class="btn-group btn-group-'+a+'">'),n.push((r=y({},t,{btnCls:o}),s=[],!0===r.isSplit&&s.push('<button type="button" class="'+r.btnCls.concat("dropdown-toggle").join(" ")+'" data-toggle="dropdown"',!0===r.disabled?" disabled":"",'><span class="caret"></span></button>'),s.push('<ul class="Operation-menu dropdown-menu',"right"===r.align?" dropdown-menu-right":"",'">'),s.push(x(r.actions,function(t,e){var n=f(t),a=n?x(t,function(t){return Tt(t)}).join(""):Tt(t);return 0<e&&n&&(a='<li class="divider"></li>'+a),a}).join("")),s.push("</ul>"),s.join("")),"</div>")),n.join("")}function Lt(t,e){return $(".ImageItem:not(.ImageItem--add)",t.closest(".ImageList").parent()).length>=e}S("dialog",{backdrop:!0,closeOnEsc:!0,selector:".js-addNewData",button:".js-saveNewData"});var Ot=1050,Et=0;function It(c,d){if(m(d.onFormSubmit))return d.onFormSubmit;var u=k(d.ajax)||{};v(u)&&(u={url:u});var f=u.url;if(!w($.type(f),["string","function"]))return $.noop;var t=u,p=t.method,h=t.params,b=t.callback;return g(["url","method","params","callback"],function(t){delete u[t]}),function(t,e,n,a){var i,o,r,s=(i=e,o=this,m(r=p)&&(r=r.call(o,i)),v(r)&&w(r.toLowerCase(),["post","put"])&&(r="post"===r.toLowerCase()?ut:ft),m(r)||(r=ut),r),l=f;m(l)&&(l=l.call(null,e)),m(h)&&(e=h.call(this,e)),s(l,e,function(){m(b)&&b.call(null),yt(d.$table),c.modal("hide")},y({isJson:!0===z("ajax.RESTful"),$waiting:c},u))}}function St(t,e){var n=z("dialog.selector");b(t)?(e=t,t=$(n)):(t=$(t),b(e)||(e={}));var a,i,o=(a=t,0!==(i=$(e.$form)).length&&$.contains(a.get(0),i.get(0))||(i=$("form",a)),i.eq(0));if(t.is(".modal")&&1===o.length){ot(o),t.is(n)&&(h("$button",e)||h("$btn",e)||(e.$button=$(z("dialog.button"))),h("$table",e)||(e.$table=mt()));var r=$(e.$button);0===r.length&&(r=$(e.$btn)),0<r.length&&r.on("click",function(){o.trigger("submit")});var s=It(t,e);o.on({"H5F:submit":function(t,e,n){return s.apply(this,[t,at(o),e,n]),n.preventDefault(),!1},reset:function(){m(e.onFormReset)&&e.onFormReset.apply(this,arguments)}});var l=e.onDialogClose;return m(l)||(l=e.onModalHide),t.on("hidden.bs.modal",function(){o.trigger("reset"),t.removeClass("is-editing is-viewing"),m(l)&&l.apply(this,arguments)}),t}}function zt(t){var e=t.data("bs.modal").$backdrop,n=2*Et*10;t.css("z-index",Ot+n),e&&e.css("z-index",Ot+n-10),Et++}function Nt(t){var e=t.data("bs.modal").$backdrop;t.css("z-index",Ot),e&&e.css("z-index",Ot-10),Et--}var Ft=Object.freeze({init:St,levelUp:zt,levelDown:Nt,top:function(){return[].sort.call($(".modal:visible"),function(t,e){return 1*$(t).css("z-index")<1*$(e).css("z-index")}).first()}});function Ht(t){return k(t.create||t.add||t)}function Ut(t){return y({},z("table.toolbarActions.basic"),t)}function Bt(t){return t.bootstrapTable("getAllSelections")}function Dt(t){return 0===Bt(t).length}function Mt(e,n,t){t.on("click",".js-"+e.action,function(t){return e.handler.apply(this,[t,Bt(n),n])})}function Rt(t,e,n,a){g([].concat(t),function(t){f(t)?Rt(t,e,n,a):v(t.action)&&m(t.handler)&&e(t,n,a)})}$.fn.bootstrapTable.Constructor.prototype.initToolbar=function(){var t=this.options;t.__$search=$(".Area--query form");var e=t.toolbar;if(!0===e&&(e={}),b(e)||t.showColumns){y(!0,t,{__tableInst:this,__toolbar:e,__$toolbar:$('<div id="'+d("toolbar")+'" class="Table-toolbar u-clearfix" />')});var n=this.$el,a=this.$toolbar;t.toolbar=null,a.prepend(t.__$toolbar),function(t,e,n,a){if(!b(t))return;var i=$('<div class="OperationGroup u-floatLeft u-hidden" />');i.append((o=t,r=e,s=n,l=a,[function(t,e){var n=h("dialog",t);if(!0===t&&(t={}),!b(t)||!($.isEmptyObject(t)||h("button",t)||n))return"";var a=y(!0,{},Ut(z("table.toolbarActions.create")),t.button,{size:e.iconSize,isPrimary:!0}),i=["Table-action--create"];v(a.classes)&&""!==a.classes&&(i=i.concat(a.classes.split(" "))),a.classes=i;var o=[];if(!v(a.url)){var r=n?t.dialog:{};if(b(r)){var s=r.selector;v(s)?delete r.selector:s=z("dialog.selector"),e.__$dialog=$(s),o.push('data-toggle="modal"','data-target="'+s+'"')}}return At(y(a,{attributes:o}))}(Ht(o),r),function(t,e,n,a){var i=Ut({size:e.iconSize});if(b(t))t=[y({},i,t)];else if(!f(t))return"";var o=function(e,n,a){return a.on("click",".js-"+e.action,function(t){return e.handler.apply(this,[t,n,a])})},r=[];return g(t,function(t){t=_t(t),r.push(At(y({},i,t))),Rt(t,o,n,a),f(t.actions)&&Rt(t.actions,o,n,a)}),r.join("")}(k(o.actions),r,s,l),function(t,e,n,a){var i=[],o=!1,r=!1;if(f(t)?i=t:b(t)&&f(t.actions)&&(i=t.actions,o=!0===t.isPrimary,m(t.handler)?(r=!0,Mt({action:z("table.toolbarActions.batch.action"),handler:t.handler},n,a)):r=!0===t.isSplit),0===i.length)return"";var s=y(!0,{},Ut(z("table.toolbarActions.batch")),{buttonClass:"Table-action--batch",size:e.iconSize,disabled:!0,isSplit:r});return 1!==i.length||f(i[0])?y(s,{actions:i,isPrimary:o}):y(!0,s,kt(_t(i[0]))),Rt(i,Mt,n,a),At(s)}(k(o.batch),r,s,l)].join(""))),0<i.children().length&&i.removeClass("u-hidden");var o,r,s,l;e.__$toolbar.prepend(i);var c=$(".Table-action--batch",i);c.is(".js-"+z("table.toolbarActions.batch.action"))&&(c=c.add(c.siblings("button")));n.on({"check.bs.table      uncheck.bs.table      check-some.bs.table      uncheck-some.bs.table      check-all.bs.table      uncheck-all.bs.table":function(){return c.prop("disabled",Dt(n))},"post-body.bs.table":function(t,e){return c.prop("disabled",0===e.length||Dt(n))},"refresh.bs.table":function(){(e.url||e.ajaxOptions&&e.ajaxOptions.url)&&c.prop("disabled",!0)},"page-change.bs.table":function(){return c.prop("disabled","server"===e.sidePagination||Dt(n))}}),e.__$dialog&&St(e.__$dialog,y({$table:n},Ht(t).dialog));e.__$left=i,e.__$batch=c}(e,t,n,a),function(t,e,n,a){var i=$('<div class="OperationGroup u-floatRight u-hidden" />');e.__$toolbar.append(i),e.__$right=i,b(t)&&function(t,i,e,o){if(!b(t)||0<$(".Table-search",o).length)return;var n=$(function(t,e){var n=k(t.field);b(n)&&(n=[n]);if(!f(n))return;var a=[],i=[];if(g(n,function(t){!0===t.required||!0===t.isHidden?i.push(t):a.push(t)}),0===a.length)return;var o=a[0],r=d("search"),s=['<div class="Table-search u-floatLeft">','<form class="input-group input-group-'+e.iconSize+'">'];1<(t.__selectable=a).length?s.push('<div class="input-group-btn">','<button class="btn btn-default dropdown-toggle" data-toggle="dropdown" type="button"><span>'+o.text+'</span><span class="caret"></span></button>','<ul class="Operation-menu dropdown-menu">',x(a,function(t){return'<li><a href="javascript:void(0);" data-field="'+t.name+'" data-placeholder="'+t.placeholder+'">'+t.text+"</a></li>"}).join(""),"</ul></div>"):!0===t.label&&s.push('<label class="input-group-addon" for="'+r+'">'+o.text+"</label>");return s.push('<input id="'+r+'" class="form-control" type="text" name="'+o.name+'" value="" placeholder="'+(o.placeholder||"")+'">',x(i,function(t){return'<input type="hidden" name="'+t.name+'" value="'+(h("value",t)?t.value:"")+'">'}).join(""),'<div class="input-group-btn">','<button class="btn btn-default js-executeTableSearch" type="submit" title="查询"><i class="fa fa-search fa-fw"></i><span class="sr-only">查询</span></button>',function(t,e){b(t)||(t={selector:t}),t=y(!0,{},z("table.toolbarActions.search.filter"),t);var n=$(t.selector);if(1!==n.length||!w(t.mode,["dropdown","dialog"]))return"";var a=d("filter"),i=[],o=void 0;return"dialog"===t.mode?(o=$('<div id="'+a+'" class="Table-filter--dialog modal fade">\n        <div class="modal-dialog modal-'+t.dialog.size+'">\n          <div class="modal-content">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>\n              <h4 class="modal-title">'+t.dialog.title+'</h4>\n            </div>\n            <div class="modal-body"></div>\n            <div class="modal-footer">\n              <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>\n              <button type="button" class="btn btn-default js-resetTableFilters">重置</button>\n              <button type="button" class="btn btn-primary js-executeTableFilters">筛选</button>\n            </div>\n          </div>\n        </div>\n      </div>'),$(".modal-body",o).append(n),$("body").append(o),i.push('data-toggle="modal"','data-target="#'+a+'"')):(o=$('<div id="'+a+'" class="Table-filter--dropdown Card u-clearfix u-hidden">\n        <div class="Card-content"></div>\n        <div class="Card-footer"><button type="button" class="btn btn-primary btn-sm js-executeTableFilters"><i class="fa fa-filter"></i><span>筛选</span></button><button type="reset" class="btn btn-default btn-sm js-resetTableFilters"><i class="fa fa-refresh"></i><span>重置</span></button></div>\n      </div>'),$(".Card-content",o).append(n)),$("select",n).each(function(){$(this).data("select2").$container.css("width","100%")}),o.addClass("Table-filter js-showTableFilters"),n.removeClass("u-hidden"),e.__$filter=o,At(y(Ut(t.button),{size:e.iconSize,attributes:i}))}(k(t.filter),e),"</div>","</form></div>"),s.join("")}(t,i)),a=$('[id^="search"]',n),r=i.__$filter;if(i.__$search=$("form",n),i.__$right.append(n),$("form",n.add(r)).on("submit",function(){return yt(e,!0),!1}),$(".dropdown-menu a",n).on("click",function(){var t=$(this),e=$(".dropdown-toggle",n);$("span:first",e).text(t.text()),a.attr({name:t.attr("data-field"),placeholder:t.attr("data-placeholder")}).val("")}),r){var s=$("form",r),l=$("form",n);r.hasClass("Table-filter--dropdown")?(o.append(r),$(".js-showMoreFilters",o).on("click",function(){var t=$(this),e="is-dropped",n="u-hidden",a=$('.js-executeTableSearch, [id^="search"]',o).add($(".dropdown-toggle",l));return t.hasClass(e)?(r.addClass(n),t.removeClass(e),a.prop("disabled",!1),s.trigger("reset"),i.__$search=l):(r.removeClass(n),t.addClass(e),a.prop("disabled",!0),l.trigger("reset"),i.__$search=s),!1}),$(".js-executeTableFilters",r).on("click",function(){s.trigger("submit")})):r.hasClass("Table-filter--dialog")&&$(".js-executeTableFilters",r).on("click",function(){i.__$search=s,l.trigger("reset"),s.trigger("submit"),i.__$search=l,r.modal("hide")}),$(".js-resetTableFilters",r).on("click",function(){s.trigger("reset")})}n.ready(function(){return n.width(function(t,e){var n=parseFloat(t.width,10);if(c(n))return n;var a=z("table.toolbarActions.search.width");if("auto"!==a&&c(n=parseFloat(a,10)))return n;var i=$('[id^="search"]',e),o=$(".dropdown-menu",e),r=k(t.__selectable).sort(function(t,e){return t.text.length+t.placeholder.length<e.text.length+e.placeholder.length}).shift(),s=parseFloat(i.css("font-size"),10);if(n=parseFloat(i.css("border-left-width"),10)+parseFloat(i.css("padding-left"),10)+parseFloat(i.css("padding-right"),10)+parseFloat(i.css("border-right-width"),10)+r.placeholder.length*s+$(".js-executeTableSearch",e).parent().width(),o.length)return n+o.parent().width()-($("span",o.siblings(".dropdown-toggle")).text().length-r.text.length)*s;return n+$("label",e).outerWidth()||0}(t,n))})}(t.search,e,n,a);!0===e.showColumns&&function(t,e,n){var a=t.__tableInst,i=$((o=t,r=['<div class="Table-columnToggle u-floatLeft keep-open">'],s=[],g(o.__tableInst.columns,function(t,e){if(!t.radio&&!t.checkbox&&(!o.cardView||t.cardVisible)&&t.switchable&&t.field!==z("table.operationColumn.field")){var n=['type="checkbox"','data-field="'+t.field+'"','value="'+e+'"'];t.visible&&n.push("checked"),s.push("<label><input "+n.join(" ")+"> "+t.title+"</label>")}}),r.push(At(Ut({text:"切换列状态",size:o.iconSize,icon:o.icons.columns.replace(/^fa\-/,""),isCoexisted:!1,align:"right",actions:s}))),r.push("</div>"),r.join("")));var o,r,s;t.__$right.append(i);var l=$(".Operation-menu li",i),c=$(":checkbox",i);l.length<=t.minimumCountColumns&&c.prop("disabled",!0);l.on("click",function(t){t.stopPropagation()}),c.on("change",function(){var t=$(this),e=t.prop("checked");a.toggleColumn(t.val(),e,!1),a.trigger("column-switch",t.attr("data-field"),e)})}(e);0<i.children().length&&i.removeClass("u-hidden")}(e,t,n,a),tt($("[title]",t.__$toolbar))}};var Pt=$.fn.bootstrapTable.Constructor.prototype.initHeader;function Gt(t,e){v(e)&&(/^((http(s)?\:)?\/\/|\/[^\/]+).+/i.test(e)||-1!==e.indexOf("URL_PLACEHOLDER"))||(e=window.location.href);var n,a,i=(n=e,a=document.createElement("a"),a.setAttribute("href",n),a)[t];return w(t,["hash","search"])?i.slice(1):i}function qt(t){var e=Gt("pathname",t).split("/"),n=e.length,a=e[n-1];""===a&&(a=e[n-2]);var i=a.match(/\.([^\.]+)$/);return i?i[1].toUpperCase():""}function Jt(t){var e={};return g(t.split("&"),function(t){t=t.split("="),e[t[0]]=decodeURIComponent(t[1])}),e}$.fn.bootstrapTable.Constructor.prototype.initHeader=function(){var t=this;Pt.apply(t,l(arguments));var e=t.options,n=t.$el,a=t.$tableHeader,i=$("table",a);!0===e.sticky&&(i.addClass(e.classes).append(t.$header.clone(!0,!0)),n.on("post-body.bs.table",function(){!function(t){if($t(t,!1),gt(t.options)){var e=t.$tableBody,n=$(".Table-container--alternative",t.$tableContainer);e.width()+e.scrollLeft()===t.$el.width()?n.hide():n.show()}}(t),i.width(n.width()),$("th",t.$header).each(function(){var t=$(this),e=$('[data-field="'+t.attr("data-field")+'"]',i);e.width(t.width()),e.height(t.height())}),$(".Table-container--alternative th",a).width($("[data-field='"+z("table.operationColumn.field")+"']",a).width())}))};function Wt(t,e,n){var a=[];e=e||"";var i=void 0;return t&&v(t)&&(i=qt(t)),a.push('<figure class="ImageItem'),t&&i&&!w(i.toLowerCase(),z("uploader.extension.image").split(","))&&a.push(" is-nongraphic"),a.push('"><div><a href="'+(t||"javascript:void(0);")+'" target="_blank" data-file-ext="'+i+'"><img src="'+(t||"")+'" alt="'+e+'" title="'+e+'"></a></div>'),e&&a.push('<figcaption class="u-textTruncate" title="'+e+'">'+e+"</figcaption>"),!0===n&&a.push('<button type="button" class="ImageItem-button fa fa-close js-removeUploadedImage" title="删除"><span class="sr-only"></span></button>'),a.push("</figure>"),a.join("")}function Qt(t){var e=$(t.$btn),n=t.max;if(!(!e.is(".ImageItem")||n&&Lt(e,n))){var a=Number(t.column);(isNaN(a)||a<=0)&&(a=z("generator.imageColumnCount"));var i="ImageList",o="ImageList-item",r=t.$btn.closest("."+o),s=$('<div class="'+o+" col-sm-"+12/a+' is-dynamic" />');s.html(Wt(t.url,t.text,t.removable)),r.before(s),m(t.callback)&&t.callback.call(null,s,r);var l=r.siblings("."+o).length;if(l===a&&($("."+i+":last",t.$el).after('<div class="'+i+' row" />'),$("."+i+":last",t.$el).append(r)),n){var c=r.closest("."+i),d="u-hidden";e.data(xt.IMAGE_ITEM_MAX,n),$("."+i+"."+d+", ."+o+"."+d,c.parent()).removeClass(d),Lt(c,n)&&(r.addClass(d),0===l&&c.addClass(d))}return s}}function Xt(t,e){if(b(t=_t(t))&&(t=[t]),!f(t=t.concat(z("table.rowActions"))))return!1;var n=x(t,function(t){return At(t,{align:"right"})});return(1<t.length||!0===e)&&(n.unshift('<div class="OperationGroup">'),n.push("</div>")),n.join("")}S("generator",{imageColumnCount:3,actions:{}});var Vt=Object.freeze({action:Xt,option:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],a=arguments[3],i=['class="is-dynamic"','value="'+t+'"'];return b(n)?g(n,function(t,e){return i.push("data-"+e+'="'+t+'"')}):a=n,!0===a&&i.push("selected"),"<option "+i.join(" ")+">"+e+"</option>"},image:Wt,imageItem:Qt});function Yt(t,n,a){b(n)&&$("[data-field]",t).each(function(){var t=$(this),e=n[t.attr("data-field")];t.is("img")?(t.attr("src",e||""),function(t,e){var n=t.closest(".ImageItem");if(0<n.length){var a=void 0;v(e)&&(a=qt(e));var i=t.closest("a");e?(i.attr("href",e),n.removeClass("is-empty"),a&&!w(a.toLowerCase(),z("uploader.extension.image").split(","))?n.addClass("is-nongraphic"):n.removeClass("is-nongraphic")):(i.attr("href","javascript:void(0);"),n.addClass("is-empty")),i.attr("data-file-ext",a)}}(t,e)):t.text(e||"-"),m(a)&&a.apply(this,[t.attr("data-field"),e])})}var Kt=Object.freeze({fill:Yt,datepicker:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$(".js-pickDate"),a=arguments[1];t.each(function(){var t=this,e=$(this),n=$('[name="'+e.attr("data-to")+'"]',e.closest("form"));e.datepicker(y({language:"zh-CN",autohide:!0},n.length?{pick:function(){return n.val(moment($(t).datepicker("getDate")).format())}}:null,a)),n.length&&e.on("change",function(){""===$(this).val()&&n.val("")})})},datetimepicker:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b(t)&&(n=t,t=null),t=null==t?$(".js-pickDateTime"):$(t),n=k(n),t.each(function(){var t=$(this);if(t.is(".js-pickDatePeriod")){var i='input:not([type="hidden"])',e=$(i,t);2===e.length&&e.each(function(t){var e=$(this),a=void 0;0===t?a="minDate":(a="maxDate",n.useCurrent=!1),e.datetimepicker(n).on("dp.change",function(t){var e=$(this),n=t.date;e.siblings(i).data("DateTimePicker")[a](n),$("input[name='"+e.attr("data-to")+"']",e.closest("form")).val(moment(n).format())})})}else t.datetimepicker(n)})}});function Zt(e){return function(t){return Gt(e,t)}}var te=Zt("search"),ee=Zt("href"),ne=Zt("protocol"),ae=Zt("host"),ie=Zt("hostname"),oe=Zt("port"),re=Zt("pathname"),se=Zt("hash"),le=Zt("username"),ce=Zt("password"),de=Zt("origin");var ue=Object.freeze({href:ee,protocol:ne,host:ae,hostname:ie,port:oe,pathname:re,hash:se,username:le,password:ce,origin:de,query:function(t,e){var n=window.location.href;1===arguments.length&&v(t)&&-1===t.indexOf("http")&&(e=t,t=n),v(t)||(t=n);var a=Jt(te(t));return null==e?a:a[e]},search:te});function fe(e){var t=e.columns,n=e.operation,a=k(z("table.operationColumn")),i=[],o=!1,r=void 0;return f(t)&&g(t,function(t){h("checkbox",t)&&(o=!0),t.field===a.field?(e.__operationDefinedByColumns=!0,r=t):i.push(t)}),!o&&b(e.toolbar)&&h("batch",e.toolbar)&&i.unshift({checkbox:!0}),r?r.title||(r.title=a.text):b(n)&&(r=function(t,e){var a=e.actions,n={},i=void 0;if(e.width&&(t.width=e.width),m(e.formatter))i=e.formatter;else if(m(a))i=function(t,e,n){return Xt(a.apply(this,[e,n]))};else if(f(a)&&0<a.length){var r=[];g(a,function(t){if(b(t=_t(t))){if(v((t=kt(t)).action)&&m(t.handler)){var o=t.handler;n["click .js-"+t.action]=function(t,e,n,a){var i=o.apply(this,[t,n,a]);return t.stopPropagation(),i},delete t.handler}r.push(t)}}),i=function(t,e,n){var a=this;return Xt(x(r,function(t){return m((t=k(t)).text)&&(t.text=t.text.apply(a,[e,n])),t}))}}return t.__handieAjaxOpts=e.ajax,t.formatter=i,t.events=y(!0,{},e.events,n),t}({title:a.text,field:a.field},n)),i.concat(r?y(!0,{events:a.events},r):[])}function pe(t,e){var n=f(t)?t.concat([]):[];return u(e)||(e=z("table.showRowNumber")),!0===e&&n.unshift({field:"serialNumber",title:"序号",align:"center",formatter:function(t,e,n){return++n}}),x(n,function(t){var i=t.viewDetail,e=t.formatter,n=t.dateTimeFormatter;return b(i)?(t.formatter=function(t){return m(e)&&(t=e.apply(this,l(arguments))),'<a href="javascript:void(0);" class="js-openDetailDialog">'+(t||"-")+"</a>"},t.events=y({},t.events,{"click .js-openDetailDialog":function(t,n,a){dt(i.url,i.params(n,a),function(t){var e=$(".js-viewDetail");m(i.handler)?i.handler.apply(null,[n,a,t,e]):Yt(e,t),e.modal("show")}),t.stopPropagation()}})):n&&(t.formatter=function(t){return!0===n&&(n="YYYY-MM-DD HH:mm:ss"),v(n)&&moment?moment(t).format(n):m(n)?n.call(this,t):t}),t})}function he(o){var t,e,n=o.url,a=o.ajaxOptions;if(a=y(!0,{},$.fn.bootstrapTable.defaults.ajaxOptions,a),o.columns=pe(fe(o),o.showRowNumber),n||(n=a.url,delete a.url),m(n)){var i=a.beforeSend,r=n;n="AJAX_URL_PLACEHOLDER",a.beforeSend=function(t,e){if(e.url=r(Jt(e.data||te(e.url))),m(i))return i.apply(null,[t,e])}}return o.slim=h("slim",o)?!0===o.slim:z("table.slim"),o.classes=(t=o.slim,e=z("table.classes"),!0===t&&(e=e.split(" ").concat("Table--slim").join(" ")),e),b(o.operation)&&!h("sticky",o.operation)&&(o.operation.sticky=!!o.slim||z("table.operationColumn.sticky")),o.slim?(h("sticky",o)||(o.sticky=!0),o.columns=x(o.columns,function(t){if(h("width",t)){var a=t.width,i=t.formatter;t.formatter=function(t){var e="auto",n=t;return c(a)?e=a+"px":v(a)&&/^\d+(\.\d+)?(px|em|rem|%)$/.test(a)&&(e=a),m(i)&&(n=i.apply(this,l(arguments))),null==n&&(n=h("undefinedText",o)?o.undefinedText:$.fn.bootstrapTable.defaults.undefinedText),'<div style="width: '+e+'; white-space: normal; word-break: break-all;">'+n+"</div>"}}return t})):o.operation&&(o.operation.sticky=!1),y(!0,o,{url:n,ajaxOptions:a})}function be(t){var e=t.data,n=e.stickyOpts,a=e.tableInst,i=$(".Page-header").outerHeight();$t(a,t.data.$container.offset().top-i<=n.top,document.documentElement.clientHeight-i-n.top-a.$toolbar.outerHeight()-a.$pagination.outerHeight())}function ve(t){var e=t.data.tableInst,n=$(this),a=n.scrollLeft(),i=".Table-container--alternative";$("> table",e.$tableHeader).css("margin-left","-"+a+"px"),gt(e.options)&&e.$tableContainer.hasClass("is-sticky")&&$(i,e.$tableBody).css("margin-right",e.$tableContainer.hasClass("is-sticky")?"-"+a+"px":0);var o=$(i,e.$tableContainer);n.width()+a===e.$el.width()?o.hide():o.show()}function me(t){var e=$(this),i=e.data("bootstrap.table");if(i){var n=z("table.operationColumn.field"),a=i.$tableHeader,o=i.$tableBody,r=$("[data-field='"+n+"']",e),s=$("thead th",e).index(r),l="Table-container--alternative";if(i.options.sticky&&0===$("."+l,a).length&&a.append('<div class="'+l+'"><table><thead><tr></tr></thead></table></div>').find("."+l+" tr").append($("[data-field='"+n+"']",a).clone()),0===$("."+l,o).length){var c=C(i.options.classes.split(" "),function(t){return"table-hover"!==t});o.append('<div class="'+l+'"><table class="'+c.join(" ")+'"><thead><tr></tr></thead><tbody></tbody></table></div>')}var d=$("."+l+" table",o),u=i.$body.children().clone(!0,!0);u.each(function(t){var e=$(this),n=$("tr:eq("+t+") td:eq("+s+")",i.$body),a=$("td:eq("+s+")",e);a.width(n.outerWidth()),a.height(n.outerHeight()),$("td:lt("+s+")",e).remove()}),$("thead tr",d).empty().append(r.clone(!0,!0)),$("tbody",d).empty().append(u),d.data("bootstrap.table",i)}}S("table",wt);var ge=Object.freeze({init:function(t,e){b(t)&&(e=t,t=null),t||(t=mt()),gt(e=he(e))&&t.on("post-body.bs.table",me),t.on({"post-body.bs.table":function(){return tt($("[title]",t))},"reset-view.bs.table       refresh-options.bs.table       refresh.bs.table":function(){return $("[title]",t).tooltip("destroy")}});var n=e,a=n.lazy,i=n.url,o=n.sticky;!0===a&&(delete e.lazy,delete e.url),t.bootstrapTable(e);var r=d("table"),s=t.data("bootstrap.table");if(s.$container.attr("id",r),!0===a&&(s.options.url=i),e.slim&&s.$tableBody.on("scroll."+r,{tableInst:s},ve),o){var l={top:15},c=void 0;!0===o?c=l:b(o)&&(c=y(!0,l,o)),b(c)&&function(t,e){var n=t.data("bootstrap.table"),a=n.$container;if(!(0<a.closest(".modal").length)){var i=a.attr("id");$(window).on("resize."+i,{$container:a,tableInst:n,stickyOpts:e},be),$(".Page-content").on("scroll."+i,{$container:a,tableInst:n,stickyOpts:e},be)}}(t,c)}},columns:pe,refresh:yt});function $e(t,e){var n,a,i,o;return t=t.toString(10),e=e.toString(10),n=t.split("."),a=e.split("."),i=2===n.length?n[1].length:0,o=2===a.length?a[1].length:0,Math.max(i,o)}function ye(t,e){var n,a=void 0;if(0===e)return t;n=(a=(t=t.toString(10)).split("."))[1]?a[1]:"",a=a[0];for(var i=0;i<e;i++)a+=n[i]?n[i]:"0";return 1*a}function we(t,e){if(0===e)return t;var n,a=void 0;2===(a=(t=t.toString()).split(".")).length&&(e+=a[1].length,t=t.replace(".","")),a=t.split(""),n=t.length;for(var i=0;i<e-n;i++)a.unshift("0");return a.splice(a.length-e,0,"."),1*a.join("")}var xe=Object.freeze({plus:function(t,e){var n=$e(t,e);return we(ye(t,n)+ye(e,n),n)},minus:function(t,e){var n=$e(t,e);return we(ye(t,n)-ye(e,n),n)},multiply:function(t,e){var n=$e(t,e);return we(ye(t,n)*ye(e,n),2*n)},divided:function(t,e){var n=$e(t,e);return ye(t,n)/ye(e,n)}});var Ce=Object.freeze({changed:function(t,n,a){var i={};return b(t)&&(b(n)?(f(a)||(a=[]),g(t,function(t,e){(0<a.length&&w(t,a)||e!==n[t])&&(i[t]=e)})):i=t),i}}),je="MUU:NotificationCount",_e=0;function ke(){var t=$(".Action--notification");if(0!==t.length){var e=$(".Notification-counter",t);return 0===e.length&&(e=$('<span class="Notification-counter"></span>'),$(".Action-trigger",t).append(e)),e}}function Te(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ke();_e=0,t&&t.remove(),W()&&localStorage.removeItem(je)}function Ae(t){_e+=t;var e=ke();0===_e?Te(e):(e&&e.text(99<_e?"99+":_e),W()&&localStorage.setItem(je,_e))}S("notification",{layer:{align:"center",alignClasses:{left:"u-textLeft",center:"u-textCenter",right:"u-textRight"},size:"normal",icons:{info:"fa-info-circle",success:"fa-check-circle",warning:"fa-warning",danger:"fa-warning"}}});var Le=["info","success","warning","danger"];function Oe(t){return"granted"===t}function Ee(e){var n=k(e),t=["click","error","close","show"];delete e.title,g(t,function(t){delete e["on"+i(t)]});var a=new Notification(n.title,e);return g(t,function(t){var e=n["on"+i(t)];m(e)&&(a["on"+t]=e)}),a}function Ie(l){return function(t,e){return n=t,a=l,i=e,o=z("notification.layer"),r=$(".Page-body > .Layer--notice"),s=[],0===r.length?(s.push("Layer--notice"),"normal"!==o.size&&w(o.size,["medium","large"])&&s.push("is-"+o.size),r=$('<div class="'+s.join(" ")+'"><i class="fa fa-fw"></i><span></span></div>'),o.alignClasses[o.align]&&r.addClass(o.alignClasses[o.align]),$(".Page-body").prepend(r),r.on("webkitAnimationEnd animationend",function(){return r.removeClass("is-shown")})):(r.removeClass(x(["bg","text"],function(e){return x(Le,function(t){return e+"-"+t})}).concat("is-shown","is-over").join(" ")),$(".fa",r).removeClass(x(Le,function(t){return o.icons[t]}).join(" "))),w(a,Le)||(a="info"),$(".fa",r).addClass(o.icons[a]),$("span",r).html(n),s=["bg-"+a,"text-"+a,"is-shown"],(!0===i||$(".modal:visible").length)&&s.push("is-over"),void r.addClass(s.join(" "));var n,a,i,o,r,s}}var Se=Ie("info"),ze=Ie("success"),Ne=Ie("warning"),Fe=Ie("danger");var He=Object.freeze({info:Se,success:ze,warning:Ne,danger:Fe,show:function(e){if(v(e)&&(e={title:e}),h("Notification",window)&&b(e)&&h("title",e)){var t=void 0;return Oe(Notification.permission)?t=Ee(e):"denied"!==Notification.permission&&Notification.requestPermission(function(t){Oe(t)&&Ee(e)}),t}},count:function(t){var e=_e;return c(t)&&(0<1*t||0!==e)&&Ae(1*t),e},clear:function(){Te()}});var Ue=Object.freeze({copy:function(t,e){var n,a,i=void 0;if(!v(t)){var o=(i=$(t)).get(0);if(null==o||1!==o.nodeType)return;t=w(o.tagName.toLowerCase(),["input","textarea"])?i.val():i.text()}return n=t,(a=document.createElement("input")).setAttribute("value",n),document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),i&&!0===e&&i.select(),t}});function Be(t,e){$("a",t).attr({href:e||"javascript:void(0);","data-file-ext":qt(e)}),$("img",t).attr("src",e)}function De(n,a){var i=m((n=y(!0,{multi_selection:!1},n)).url);i&&(n.url="dynamicUrlPlaceholder");var e,o,r=void 0;if(n.uptoken){n.runtimes||(n.runtimes="html5,flash,html4");var t=(e=n.init,o={qiniu:{},stashed:{}},e&&g(["FilesAdded","BeforeUpload","FileUploaded"],function(t){m(e[t])&&(o.stashed[t]=e[t],delete e[t])}),o.qiniu=e,o);n.init=t.qiniu,(r=Qiniu.uploader(n)).__handie=t.stashed,r.bind("FileUploaded",function(t,e,n){return Be($('[data-file-id="'+e.id+'"]'),""+t.getOption("domain")+JSON.parse(n.response).key)})}else(r=new plupload.Uploader(n)).bind("FileUploaded",function(t,e,n){m(a.getImageUrl)&&Be($('[data-file-id="'+e.id+'"]'),a.getImageUrl(JSON.parse(n.response)))}),r.init();return r.bind("FilesAdded",function(t,e){i&&r.setOption("url",n.url())}),r.bind("BeforeUpload",function(t,e){return $('[data-file-id="'+e.id+'"]').addClass("is-uploading")}),r.bind("FileUploaded",function(t,e){var n=$('[data-file-id="'+e.id+'"]');n.removeClass("is-uploading"),/^image\/[^\/]+/gi.test(e.type)?n.removeClass("is-nongraphic"):n.addClass("is-nongraphic")}),r}function Me(i,t){var e=De(i,t);return e.bind("FilesAdded",function(t,e){var n=$(i.browse_button).siblings(".ImageItem"),a=e[0];Be(n,""),n.removeClass("is-empty").attr("data-file-id",a.id)}),e}function Re(n,o){var t=De(n,o);return t.bind("FilesAdded",function(t,e){var a=$(n.browse_button),i=a.closest(".ImageList").parent();g(e,function(n){Qt({$btn:a,$el:i,text:n.name,column:o.column,max:o.limit,removable:!0,callback:function(t,e){$(".ImageItem",t).attr("data-file-id",n.id),m(o.imageItemAdded)&&o.imageItemAdded.call(null,t,e)}})})}),t}S("uploader",{selector:".js-uploadImage",limit:0,draggable:!0,extension:{image:"jpeg,jpg,png,gif"}});var Pe=Object.freeze({image:function(t,e){var n=void 0,a=void 0;if(t=$(t),b((e=y(!0,{limit:z("uploader.limit"),draggable:z("uploader.draggable"),settings:null},e)).settings)){var i={browse_button:t.get(0),filters:{mime_types:[{title:"图片文件",extensions:z("uploader.extension.image")}]}};!0===e.draggable&&(i.drop_element=t.get(0)),0<t.siblings(".ImageItem").length?(n=Me,e.settings.multi_selection=!1):n=Re,h("__handie",a=n(y(!0,i,e.settings),e))&&(g(_(a.__handie),function(t){return a.bind(t,a.__handie[t])}),delete a.__handie)}return a}});$(document).ready(function(){g([{dependency:Q,initializer:function(){y($.fn.modal.Constructor.DEFAULTS,{backdrop:z("dialog.backdrop"),keyboard:z("dialog.closeOnEsc")})}},{dependency:X,initializer:function(){y($.fn.bootstrapTable.defaults,{classes:z("table.classes"),iconsPrefix:"fa",icons:{refresh:"fa-refresh",toggle:"fa-list-alt",columns:"fa-th",detailOpen:"fa-plus",detailClose:"fa-minus"},iconSize:"sm",sidePagination:"server",pagination:!0,pageSize:20,pageList:[],cache:!1,queryParams:function(t){return at(this.__$search.serializeArray().concat({name:"pageSize",value:this.pageSize},{name:"pageNo",value:this.pageNumber},null==t.sort?[]:[{name:z("table.keys.sort"),value:t.sort},{name:z("table.keys.order"),value:t.order}]),function(e){return g(_(e),function(t){return e[t]=e[t].toString()}),e})},responseHandler:function(t){return z("table.responseHandler").call(this,t)},onPostBody:function(t){$(".detail-icon").closest("td").addClass("u-alignMiddle u-textCenter")}}),y($.fn.bootstrapTable.columnDefaults,{valign:"middle"})}},{dependency:V,initializer:function(){y(!0,$.fn.datetimepicker.defaults,{locale:"zh-CN",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-crosshairs",clear:"fa fa-trash",close:"fa fa-remove"},showTodayButton:!0})}},{dependency:Y,initializer:function(){g({containerCssClass:"handie-Select2-container",dropdownCssClass:"handie-Select2-dropdown",minimumResultsForSearch:"Infinity"},function(t,e){$.fn.select2.defaults.set(e,t)})}},{dependency:K,initializer:function(){H5F.rules({MOBILE:{rule:/^(0|86|17951)?(13[0-9]|15[012356789]|17[03678]|18[0-9]|14[57])[0-9]{8}$/,message:"NOT_A_MOBILE"}}),H5F.errors({UNKNOWN_INPUT_TYPE:"{{LABEL}}为未知输入框类型",COULD_NOT_BE_EMPTY:"{{LABEL}}不能为空",LENGTH_SMALLER_THAN_MINIMUM:"{{LABEL}}应为{{MINLENGTH}}～{{MAXLENGTH}}个字符",LENGTH_BIGGER_THAN_MAXIMUM:"{{LABEL}}应为{{MINLENGTH}}～{{MAXLENGTH}}个字符",INVALID_VALUE:"{{LABEL}}不符合要求的格式",NOT_AN_ABSOLUTE_URL:"{{LABEL}}不是一个 URL 地址",NOT_AN_EMAIL:"{{LABEL}}不是一个邮箱",NOT_A_NUMBER:"{{LABEL}}不是一个数字",UNDERFLOW:"{{LABEL}}不能小于{{MIN}}",OVERFLOW:"{{LABEL}}不能大于{{MAX}}",DIFFERENT_VALUE:"{{LABEL}}所输入的字符要与{{ASSOCIATE_LABEL}}保持一致",AT_LEAST_CHOOSE_ONE:"请从{{LABEL}}中选择一项",SHOOLD_BE_CHOSEN:"请选中{{UNIT_LABEL}}",SHOOLD_CHOOSE_AN_OPTION:"必须选择{{LABEL}}",NOT_A_MOBILE:"{{LABEL}}不符合手机号码格式"})}},{dependency:Z,initializer:function(){moment.locale("zh-CN")}}],function(t){t.dependency()&&t.initializer()}),Q()&&($(document).on("shown.bs.modal",".modal",function(){var t=$(this),e=$(".modal-dialog",t),n=$(".modal-content",t);zt(t),e.height()>t.height()&&(t.addClass("is-scrollable"),n.css("height",t.height()-parseFloat(e.css("margin-top"),10)-parseFloat(e.css("margin-bottom"),10)-parseFloat(n.css("border-top-width"),10)-parseFloat(n.css("border-bottom-width"),10)))}),$(document).on("hidden.bs.modal",".modal",function(){var t=$(this);Nt(t),t.hasClass("is-scrollable")&&(t.removeClass("is-scrollable"),$(".modal-content",t).css("height","auto"))})),Y()&&($("select").select2(),$(".modal select").on("select2:open",function(){$(this).data("select2").$dropdown.css("z-index",$(this).closest(".modal").css("z-index"))})),function(){if(W()){var t=localStorage.getItem(je);t&&c(t)&&Ae(1*t)}}(),$("input[type='number']").on("mousewheel",function(t){t.preventDefault()}),$("body").on("click",".js-removeUploadedImage",function(){var t=$(this).closest(".ImageItem");$("[data-file-ext]",t).removeAttr("data-file-ext"),t.removeClass("is-nongraphic"),t.siblings("button.ImageItem--add").length?(t.addClass("is-empty").removeAttr("data-file-id"),Be(t,"")):function(t){var e="ImageList",n="ImageList-item",a="u-hidden",i=t.closest("."+e),o=i.parent();$("."+e+":gt("+$("."+e,o).index(i)+")",o).each(function(){var t=$(this);t.prev("."+e).append($("."+n+":first",t)),0===$("."+n,t).length&&t.remove()}),t.closest("."+n).remove();var r=$(".ImageItem--add",o),s=r.data(xt.IMAGE_ITEM_MAX);if(s){var l=r.closest("."+n);$("."+e+"."+a,o).removeClass(a),Lt(r,s)?0===l.siblings("."+n).length&&l.closest("."+e).addClass(a):l.removeClass(a)}}(t)})}),window.handie={setDefaults:function(t){b(t)&&g(t,function(t,e){return S("ajax"===(n=e)?"http":n,t);var n})},set:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return E.apply(void 0,[L].concat(e))},get:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.apply(void 0,[L].concat(e))},alert:vt,http:ht,socket:bt,table:ge,dialog:Ft,form:st,field:Kt,select:nt,generate:Vt,text:Ue,calc:xe,data:Ce,upload:Pe,url:ue,notice:He,ajax:ht,calculate:xe}});
//# sourceMappingURL=../maps/utils.min.js.map
